# Решение проблем с деплоем на Railway

## Проблема: Railway не подхватил проект

### Проверка 1: Правильно ли подключен репозиторий?

1. В Railway откройте ваш проект
2. Проверьте вкладку **"Settings"** → **"Source"**
3. Убедитесь, что указан правильный репозиторий и ветка (`main`)

### Проверка 2: Настройки деплоя

В Railway откройте **"Settings"** → **"Deploy"** и проверьте:

- **Root Directory**: должен быть пустым или `hyperion-site` (если репозиторий в корне проекта)
- **Build Command**: `npm run build`
- **Start Command**: `npm start`

### Проверка 3: Переменные окружения

Убедитесь, что добавлены ВСЕ переменные:

```
ADMIN_USERNAME=admin
ADMIN_PASSWORD=ваш_пароль
SESSION_SECRET=длинная_случайная_строка
NODE_ENV=production
PORT=3000
```

### Проверка 4: Логи деплоя

1. Откройте вкладку **"Deployments"**
2. Выберите последний деплой
3. Нажмите **"View Logs"**
4. Проверьте ошибки

### Частые ошибки и решения:

#### Ошибка: "Cannot find module"
**Решение**: Убедитесь, что `package.json` содержит все зависимости

#### Ошибка: "Build failed"
**Решение**: 
- Проверьте логи сборки
- Убедитесь, что TypeScript компилируется без ошибок
- Проверьте, что все файлы закоммичены

#### Ошибка: "Port already in use"
**Решение**: Railway автоматически устанавливает PORT, убедитесь что не переопределяете его

#### Ошибка: "Application failed to start"
**Решение**:
- Проверьте переменные окружения
- Убедитесь, что `npm start` работает локально
- Проверьте логи запуска

### Ручная настройка в Railway UI:

1. **Settings** → **Deploy**
   - Root Directory: оставьте пустым (если проект в корне) или укажите `hyperion-site`
   - Build Command: `npm run build`
   - Start Command: `npm start`

2. **Settings** → **Variables**
   - Добавьте все необходимые переменные

3. **Settings** → **Service**
   - Healthcheck Path: `/` (опционально)

### Принудительный редеплой:

1. В Railway откройте **"Deployments"**
2. Найдите последний деплой
3. Нажмите **"Redeploy"**

### Проверка после деплоя:

1. Откройте URL приложения
2. Проверьте `/` - должна открыться главная страница
3. Проверьте `/login` - должна открыться страница входа
4. Попробуйте войти с учетными данными из переменных окружения

### Если ничего не помогает:

1. Удалите проект в Railway
2. Создайте новый проект
3. Подключите репозиторий заново
4. Настройте переменные окружения
5. Дождитесь автоматического деплоя

